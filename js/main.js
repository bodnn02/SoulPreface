order_list = [
    {
        id: 1,
        title: "Топ + Брюки",
        colors: [
            {
                id: 1,
                title: "black",
                color_code: "#323232",
                gallery_items: [
                    {
                        id: 1,
                        src: "img/order-gallery-6.png"
                    },
                    {
                        id: 2,
                        src: "img/order-gallery-7.png"
                    },
                    {
                        id: 3,
                        src: "img/order-gallery-8.png"
                    },
                    {
                        id: 4,
                        src: "img/order-gallery-9.png"
                    },
                    {
                        id: 5,
                        src: "img/order-gallery-10.png"
                    },
                ]
            },
            {
                id: 2,
                title: "white",
                color_code: "#fff",
                gallery_items: [
                    {
                        id: 1,
                        src: "img/order-gallery-1.png"
                    },
                    {
                        id: 2,
                        src: "img/order-gallery-2.png"
                    },
                    {
                        id: 3,
                        src: "img/order-gallery-3.png"
                    },
                    {
                        id: 4,
                        src: "img/order-gallery-4.png"
                    },
                    {
                        id: 5,
                        src: "img/order-gallery-5.png"
                    },
                ]
            }
        ],
        characteristics: [
            {
                id: 1,
                title: "XS",
                content: [
                    {
                        id: 1,
                        title: "Высота изделия:",
                        value: "50 см"
                    },
                    {
                        id: 2,
                        title: "Ширина изделия:",
                        value: "50 см"
                    },
                    {
                        id: 3,
                        title: "Длина рукава:",
                        value: "54 см"
                    },
                ]
            },
            {
                id: 2,
                title: "S",
                content: [
                    {
                        id: 1,
                        title: "Высота изделия:",
                        value: "52 см"
                    },
                    {
                        id: 2,
                        title: "Ширина изделия:",
                        value: "52 см"
                    },
                    {
                        id: 3,
                        title: "Длина рукава:",
                        value: "52 см"
                    },
                ]
            },
            {
                id: 3,
                title: "M",
                content: [
                    {
                        id: 1,
                        title: "Высота изделия:",
                        value: "54 см"
                    },
                    {
                        id: 2,
                        title: "Ширина изделия:",
                        value: "54 см"
                    },
                    {
                        id: 3,
                        title: "Длина рукава:",
                        value: "54 см"
                    },
                ]
            }
        ]
    },
    {
        id: 2,
        title: "Лонгслив + Брюки",
        colors: [
            {
                id: 1,
                title: "black",
                color_code: "#323232",
                gallery_items: [
                    {
                        id: 1,
                        src: "img/order-gallery-11.png"
                    },
                    {
                        id: 2,
                        src: "img/order-gallery-12.png"
                    },
                    {
                        id: 3,
                        src: "img/order-gallery-13.png"
                    },
                    {
                        id: 4,
                        src: "img/order-gallery-14.png"
                    },
                    {
                        id: 5,
                        src: "img/order-gallery-15.png"
                    },
                ]
            },
            {
                id: 2,
                title: "white",
                color_code: "#fff",
                gallery_items: [
                    {
                        id: 1,
                        src: "img/order-gallery-16.png"
                    },
                    {
                        id: 2,
                        src: "img/order-gallery-17.png"
                    },
                    {
                        id: 3,
                        src: "img/order-gallery-18.png"
                    },
                    {
                        id: 4,
                        src: "img/order-gallery-19.png"
                    },
                    {
                        id: 5,
                        src: "img/order-gallery-20.png"
                    },
                ]
            }
        ],
        characteristics: [
            {
                id: 1,
                title: "XS",
                content: [
                    {
                        id: 1,
                        title: "Высота изделия:",
                        value: "50 см"
                    },
                    {
                        id: 2,
                        title: "Ширина изделия:",
                        value: "50 см"
                    },
                    {
                        id: 3,
                        title: "Длина рукава:",
                        value: "54 см"
                    },
                ]
            },
            {
                id: 2,
                title: "S",
                content: [
                    {
                        id: 1,
                        title: "Высота изделия:",
                        value: "52 см"
                    },
                    {
                        id: 2,
                        title: "Ширина изделия:",
                        value: "52 см"
                    },
                    {
                        id: 3,
                        title: "Длина рукава:",
                        value: "52 см"
                    },
                ]
            },
            {
                id: 3,
                title: "M",
                content: [
                    {
                        id: 1,
                        title: "Высота изделия:",
                        value: "54 см"
                    },
                    {
                        id: 2,
                        title: "Ширина изделия:",
                        value: "54 см"
                    },
                    {
                        id: 3,
                        title: "Длина рукава:",
                        value: "54 см"
                    },
                ]
            }
        ]
    }
]
assortment_list = [
    {
        id: 1,
        gallery_items: [
            {
                id: 1,
                src: "img/gallery-item.png"
            },
            {
                id: 2,
                src: "img/gallery-item-2.png"
            },
            {
                id: 3,
                src: "img/gallery-item-3.png"
            },
        ],
        characteristics: [
            {
                id: 1,
                title: "XS",
                content: [
                    {
                        id: 1,
                        title: "Высота изделия:",
                        value: "50 см"
                    },
                    {
                        id: 2,
                        title: "Ширина изделия:",
                        value: "50 см"
                    },
                    {
                        id: 3,
                        title: "Длина рукава:",
                        value: "54 см"
                    },
                ]
            },
            {
                id: 2,
                title: "S",
                content: [
                    {
                        id: 1,
                        title: "Высота изделия:",
                        value: "52 см"
                    },
                    {
                        id: 2,
                        title: "Ширина изделия:",
                        value: "52 см"
                    },
                    {
                        id: 3,
                        title: "Длина рукава:",
                        value: "52 см"
                    },
                ]
            },
            {
                id: 3,
                title: "M",
                content: [
                    {
                        id: 1,
                        title: "Высота изделия:",
                        value: "54 см"
                    },
                    {
                        id: 2,
                        title: "Ширина изделия:",
                        value: "54 см"
                    },
                    {
                        id: 3,
                        title: "Длина рукава:",
                        value: "54 см"
                    },
                ]
            }
        ],
        description: [
            {
                id: 1,
                title: "Прямой силуэт",
                text: "Свободный крой с минимальным прилеганием подойдет на любую фигуру."
            },
            {
                id: 2,
                title: "Расширенный вырез",
                text: "Горловина с отделочной строчкой придает лонгсливу аккуратный и законченный вид."
            },
            {
                id: 3,
                title: "Втачные рукава",
                text: "Манжета на запястье надежно фиксирует рукав. А естественный переход ткани от плеча к руке делает фасон завершенным."
            },
        ]
    },
    {
        id: 2,
        gallery_items: [
            {
                id: 1,
                src: "img/gallery-item-4.png"
            },
            {
                id: 2,
                src: "img/gallery-item-5.png"
            },
            {
                id: 3,
                src: "img/gallery-item-6.png"
            },
        ],
        characteristics: [
            {
                id: 1,
                title: "XS",
                content: [
                    {
                        id: 1,
                        title: "Высота изделия:",
                        value: "50 см"
                    },
                    {
                        id: 2,
                        title: "Ширина изделия:",
                        value: "50 см"
                    },
                    {
                        id: 3,
                        title: "Длина рукава:",
                        value: "54 см"
                    },
                ]
            },
            {
                id: 2,
                title: "S",
                content: [
                    {
                        id: 1,
                        title: "Высота изделия:",
                        value: "52 см"
                    },
                    {
                        id: 2,
                        title: "Ширина изделия:",
                        value: "52 см"
                    },
                    {
                        id: 3,
                        title: "Длина рукава:",
                        value: "52 см"
                    },
                ]
            },
            {
                id: 3,
                title: "M",
                content: [
                    {
                        id: 1,
                        title: "Высота изделия:",
                        value: "54 см"
                    },
                    {
                        id: 2,
                        title: "Ширина изделия:",
                        value: "54 см"
                    },
                    {
                        id: 3,
                        title: "Длина рукава:",
                        value: "54 см"
                    },
                ]
            }
        ],
        description: [
            {
                id: 1,
                title: "Полуприлегающий силуэт",
                text: "Заманчиво повторяет очертания фигуры, но не демонстрирует ее полностью. Плотнее всего топ прилегает к телу по линии талии (немного выше или ниже)."
            },
            {
                id: 2,
                title: "Удобные бретели",
                text: "Цельнокроеные широкие бретели не соскальзывают с плечей и полностью перекрывают собой лямки от бюстгальтера."
            },
            {
                id: 3,
                title: "«Правильная» резинка",
                text: "Фиксирующая лента не дает топу задираться и поддерживает грудь, но при этом не стягивает кожу. Это позволяет носить его не только дома, но и на занятиях фитнесом."
            },
        ]
    },
    {
        id: 3,
        gallery_items: [
            {
                id: 1,
                src: "img/gallery-item-7.png"
            },
            {
                id: 2,
                src: "img/gallery-item-8.png"
            },
            {
                id: 3,
                src: "img/gallery-item-9.png"
            },
        ],
        characteristics: [
            {
                id: 1,
                title: "XS",
                content: [
                    {
                        id: 1,
                        title: "Длина изделия по боковому шву:",
                        value: "98 см"
                    }
                ]
            },
            {
                id: 2,
                title: "S",
                content: [
                    {
                        id: 1,
                        title: "Длина изделия по боковому шву:",
                        value: "98 см"
                    }
                ]
            },
            {
                id: 3,
                title: "M",
                content: [
                    {
                        id: 1,
                        title: "Длина изделия по боковому шву:",
                        value: "98 см"
                    }
                ]
            }
        ],
        description: [
            {
                id: 1,
                title: "Свободный крой",
                text: "Завышенная талия делает фигуру женственной и привлекательной, не ограничивая движения. Такие брюки отлично подойдут не только в качестве любимой домашней одежды, но и для занятий спортом."
            },
            {
                id: 2,
                title: "«Правильная» резинка",
                text: "Удерживает брюки на поясе, не давая ткани соскальзывать вниз. Длина фиксирующей ленты подобрана так, чтобы не мешать сну и активному отдыху."
            },
            {
                id: 3,
                title: "Боковые карманы",
                text: "Всегда практичное дополнение к штанам. Карманы вшиты в боковые швы и выполнены в тон изделия, поэтому не акцентируют на себе лишнего внимания."
            },
        ]
    }
]

$(document).on("click", "[data-link]", function (e) {
    attr = $(this).attr("data-link")

    $(".overlay").addClass("opened")
    $(".overlay-item[data-overlay=" + attr + "]").addClass("opened")
    scrollDisable()
})

$(document).on("click", ".overlay-item__close-btn", function (e) {
    $(".overlay").find(".opened").removeClass("opened")
    $(".overlay").removeClass("opened")
    scrollEnable()
})


$(document).on("click", ".characteristics-tabs__item", function (e) {
    $(this).parent().children(".characteristics-tabs__item").removeClass("selected")
    $(this).addClass("selected")

    assortmentGalleryUpdate()
})

$(".assortment-tabs__item").on("click", function (e) {
    $(this).parent().children(".assortment-tabs__item").removeClass("selected")
    $(this).addClass("selected")

    assortmentGalleryUpdate() 
});

function assortmentGalleryUpdate() {
    selected_tab = $(".assortment-tabs").find(".selected").attr("data-tab")
    selected_characteristics = $("#assortment-characteristics").find(".selected").text()

    gallery_items = $(".assortment-gallery").find(".gallery-ul")
    paggination_items = $(".assortment-gallery").find(".paggination-ul")
    characteristics_items = $("#assortment-characteristics").parent().parent().parent().find(".characteristics-list")
    description_items = $(".assortment-description").children("ul")

    $(gallery_items).empty()
    $(paggination_items).empty()

    assortment_list[selected_tab].gallery_items.forEach(function(item) {
        if(item.id == 1) {
            gallery_items.append(`
                <li class="gallery-ul__item selected">
                    <img src="${item.src}" alt="">
                </li>
            `);

            paggination_items.append(`
                <li class="paggination-ul__item selected"></li>
            `);
        }
        if(item.id > 1) {
            gallery_items.append(`
                <li class="gallery-ul__item">
                    <img src="${item.src}" alt="">
                </li>
            `);

            paggination_items.append(`
                <li class="paggination-ul__item"></li>
            `);
        }
    });

    $(characteristics_items).empty()

    characteristics = assortment_list[selected_tab].characteristics.find(item => item.title === selected_characteristics)

    characteristics.content.forEach(function(item) {
        characteristics_items.append(`
            <li class="characteristics-list__item">
                <span>${item.title}</span>
                <span>${item.value}</span>
            </li>
        `);
    });

    $(description_items).empty()

    assortment_list[selected_tab].description.forEach(function(item) {
        description_items.append(`
            <li>
                <h4 class="assortment-description__h4">${item.title}</h4>
                <p class="assortment-description__p">${item.text}</p>
            </li>
        `);
    });
}


$(document).on("click", "[data-pagginator] .pagginator__next", function (e) {
    attr = $(this).parent().attr("data-pagginator")
    pagginator_items = $(this).parent().find(".paggination-ul").children(".paggination-ul__item")
    content_items = $("[data-paggination=" + attr + "]").children("li")

    current_index = $(this).parent().find(".selected").index()
    length = $(pagginator_items).length

    if(current_index + 1 == length) {
        $(pagginator_items).removeClass("selected")
        $(pagginator_items).eq(0).addClass("selected")

        $(content_items).removeClass("selected")
        $(content_items).eq(0).addClass("selected")
    } else {
        $(pagginator_items).removeClass("selected")
        $(pagginator_items).eq(current_index + 1).addClass("selected")

        $(content_items).removeClass("selected")
        $(content_items).eq(current_index + 1).addClass("selected")
    }
})

$(document).on("click", "[data-pagginator] .pagginator__prev", function (e) {
    attr = $(this).parent().attr("data-pagginator")
    pagginator_items = $(this).parent().find(".paggination-ul").children(".paggination-ul__item")
    content_items = $("[data-paggination=" + attr + "]").children("li")

    current_index = $(this).parent().find(".selected").index()
    length = $(pagginator_items).length

    if(current_index - 1 < 0) {
        $(pagginator_items).removeClass("selected")
        $(pagginator_items).eq(length - 1).addClass("selected")

        $(content_items).removeClass("selected")
        $(content_items).eq(length - 1).addClass("selected")
    } else {
        $(pagginator_items).removeClass("selected")
        $(pagginator_items).eq(current_index - 1).addClass("selected")

        $(content_items).removeClass("selected")
        $(content_items).eq(current_index - 1).addClass("selected")
    }
})
$(document).on("click", "[data-pagginator] .paggination-ul__item", function (e) {
    attr = $(this).parent().parent().attr("data-pagginator")
    pagginator_items = $(this).parent().children(".paggination-ul__item")
    content_items = $("[data-paggination=" + attr + "]").children("li")

    current_index = $(this).index()

    $(pagginator_items).removeClass("selected")
    $(pagginator_items).eq(current_index).addClass("selected")

    $(content_items).removeClass("selected")
    $(content_items).eq(current_index).addClass("selected")
})

$("a[href^='#']").on("click", function(event) {
    // Предотвращаем стандартное поведение ссылки (переход по якорю)
    event.preventDefault();

    // Получаем целевой блок, к которому нужно выполнить скролл
    const targetBlock = $($(this).attr("href"));

    // Выполняем плавный скролл к целевому блоку
    $("html, body").animate({
    scrollTop: targetBlock.offset().top
    }, 1000); // Время анимации в миллисекундах (здесь 1000 мс = 1 сек)
});

$(".carousel__prev").on("click", function(event) {
    content_list = $(this).parent().find(".carousel-list")

    items_per_page = 3

    if ($(window).width() <= 1000) {
        items_per_page = 2
    }
    if ($(window).width() <= 800) {
        items_per_page = 1
    }

    pages = ($(content_list).children(".carousel-item").length / items_per_page)
    current_page = $(content_list).attr("data-page")

    if(current_page - 1 < 0) {
        $(content_list).css("transform", "translateX(-" + ((pages - 1) * 100) + "%)")

        $(content_list).attr("data-page", pages - 1)
    } else {
        $(content_list).css("transform", "translateX(-" + ((parseInt(current_page) - 1) * 100) + "%)")

        $(content_list).attr("data-page", parseInt(current_page) - 1)
    }
});

$(".carousel__next").on("click", function(event) {
    content_list = $(this).parent().find(".carousel-list")

    items_per_page = 3

    if ($(window).width() <= 1000) {
        items_per_page = 2
    }
    if ($(window).width() <= 800) {
        items_per_page = 1
    }

    pages = ($(content_list).children(".carousel-item").length / items_per_page)
    console.log(pages)
    current_page = $(content_list).attr("data-page")

    if((parseInt(current_page) + 1) == pages) {
        $(content_list).css("transform", "translateX(-" + 0 + "%)")

        $(content_list).attr("data-page", 0)
    } else {
        $(content_list).css("transform", "translateX(-" + ((parseInt(current_page) + 1) * 100) + "%)")

        $(content_list).attr("data-page", (parseInt(current_page) + 1))
    }
});

$("#order-select").on("change", function(e) {
    orderSizesUpdate()
    orderCharacteristicsUpdate()
    orderGalleryUpdate()
})
$(document).on("click", ".size-list__item", function (e) {
    $(this).parent().children(".size-list__item").removeClass("selected")
    $(this).addClass("selected")

    orderCharacteristicsUpdate()
    galleryScrollbarUpdate()
})

$(document).on("click", ".color-list__item", function (e) {
    $(this).parent().children(".color-list__item").removeClass("selected")
    $(this).addClass("selected")

    orderGalleryUpdate()
    galleryScrollbarUpdate()
})

function galleryScrollbarUpdate() {
    scrollbar_line = $(".gallery-scrollbar__line")
    current_index = $(scrollbar_line).parent().parent().find(".gallery-list").attr("data-gallery")
    length = $(scrollbar_line).parent().parent().find(".gallery-list").children(".gallery-list__item").length

    $(scrollbar_line).css("height", ((parseInt(current_index) + 1)/length) * 100 + "%")
}

$(document).ready(function (e) {
    galleryScrollbarUpdate()
})

$(".m-btn").on("click", function(e) {
    $(".m-menu").toggleClass("opened")
})

function orderFormUpdate() {
    var selected_option = $("#order-select").val()
    var selected_size = $(".size-list__item.selected").text()
    var selected_color = $(".color-list__item.selected").attr("data-color")

    const selectedItem = order_list.find(item => item.title === selected_option);
    const sizes = foundItem.characteristics.find(item => item.title === selected_size)
    const color = foundItem.colors.find(item => item.title === selected_color)

    sizes.content.forEach(function(item) {
        sizes_list.append(`
            <li class="characteristics-list__item">
                <span>${item.title}</span>
                <span>${item.value}</span>
            </li>
        `)
    })
}

function orderCharacteristicsUpdate() {
    var selected_option = $("#order-select").val()
    var selected_size = $(".size-list__item.selected").text()
    var characteristics_list = $("#order-characteristics")

    const selectedItem = order_list.find(item => item.title === selected_option);
    const characteristics = selectedItem.characteristics.find(item => item.title === selected_size)

    $(characteristics_list).empty()

    characteristics.content.forEach(function(item) {
        characteristics_list.append(`
            <li class="characteristics-list__item">
                <span>${item.title}</span>
                <span>${item.value}</span>
            </li>
        `)
    })
}

function orderSizesUpdate() {
    var selected_option = $("#order-select").val()
    var sizes_list = $("#order-sizes-list")

    const selectedItem = order_list.find(item => item.title === selected_option);

    $(sizes_list).empty()

    selectedItem.characteristics.forEach(function(item) {
        if(item.id == 1) {
            sizes_list.append(`
                <li class="size-list__item selected">${item.title}</li>
            `)
        }
        if(item.id > 1) {
            sizes_list.append(`
                <li class="size-list__item">${item.title}</li>
            `)
        }
    })
}

function orderGalleryUpdate() {
    var selected_option = $("#order-select").val()
    var selected_color = $("#order-color").find(".selected").attr("data-color")
    var gallery = $("#order-gallery")
    var thumbnails = $("#order-thumbnails")

    const selectedItem = order_list.find(item => item.title === selected_option);
    const color = selectedItem.colors.find(item => item.title === selected_color)

    $(gallery).empty()
    $(thumbnails).empty()

    color.gallery_items.forEach(function(item) {
        if(item.id == 1) {
            gallery.append(`
                <li class="gallery-list__item selected">
                    <img src="${item.src}" alt="">
                </li>
            `)
            thumbnails.append(`
                <li class="gallery-thumbnails__item selected">
                    <img src="${item.src}" alt="">
                </li>
            `)
        }
        if(item.id > 1) {
            gallery.append(`
                <li class="gallery-list__item">
                    <img src="${item.src}" alt="">
                </li>
            `)
            thumbnails.append(`
                <li class="gallery-thumbnails__item selected">
                    <img src="${item.src}" alt="">
                </li>
            `)
        }
    })
}

function scrollDisable() {
    $("html,body").css("overflow","hidden");
}
function scrollEnable() {
    $("html,body").css("overflow","auto");
}


function galleryNext() {
    var gallery = $(".gallery-list")
    var height = $(gallery).children(".gallery-list__item").eq(0).height();
    var current_index = $(gallery).attr("data-gallery")
    var length = $(gallery).children(".gallery-list__item").length

    if(parseInt(current_index) + 1 >= length) {
        $(gallery).css("transform", `translate3d(0px, -${(0) * height}px, 0px)`)
        $(gallery).attr("data-gallery", 0)
        galleryScrollbarUpdate()
        updateThumbnails()
    } else {
        $(gallery).css("transform", `translate3d(0px, -${(parseInt(current_index) + 1) * height}px, 0px)`)
        $(gallery).attr("data-gallery", parseInt(current_index) + 1)
        galleryScrollbarUpdate()
        updateThumbnails()
    }
}
function galleryPrev() {
    var gallery = $(".gallery-list")
    var height = $(gallery).children(".gallery-list__item").eq(0).height();
    var current_index = $(gallery).attr("data-gallery")
    var length = $(gallery).children(".gallery-list__item").length

    if(parseInt(current_index) - 1 < 0) {
        $(gallery).css("transform", `translate3d(0px, -${(length - 1) * height}px, 0px)`)
        $(gallery).attr("data-gallery", (length - 1))
        galleryScrollbarUpdate()
        updateThumbnails()
    } else {
        $(gallery).css("transform", `translate3d(0px, -${(parseInt(current_index) - 1) * height}px, 0px)`)
        $(gallery).attr("data-gallery", parseInt(current_index) - 1)
        galleryScrollbarUpdate()
        updateThumbnails()
    }
}
function updateThumbnails() {
    $("#order-thumbnails").children(".gallery-thumbnails__item").removeClass("selected")
    $("#order-thumbnails").children(".gallery-thumbnails__item").eq(parseInt($("#order-gallery").attr("data-gallery"))).addClass("selected")
}
$(document).on("click", ".gallery-thumbnails__item", function (e) {
    gallery = $(this).parent().parent().find(".gallery-list").children(".gallery-list__item")
    var height = $(gallery).eq(0).height();

    $(gallery).parent().css("transform", `translate3d(0px, -${$(this).index() * height}px, 0px)`)
    $(gallery).parent().attr("data-gallery", $(this).index())
    $(gallery).parent().attr("data-gallery", $(this).index())

    $(this).parent().children(".gallery-thumbnails__item").removeClass("selected")
    $(this).addClass("selected")

    galleryScrollbarUpdate()
});

$(".order-gallery__wrapper").swipe({
    swipe: function (event, direction) {
        if ($(window).width() >= 1200) {
            if (direction === "up") {
                galleryNext()
            } else if (direction === "down") {
                galleryPrev()
            }
        } 
    },
    allowPageScroll: "vertical",
});

$(".order-gallery__wrapper").on("wheel", function (event) {
    if ($(window).width() >= 1200) {
        const delta = event.originalEvent.deltaY || -event.originalEvent.wheelDelta || event.originalEvent.detail;

        if (delta > 0) {
            galleryNext()
            return false;
        } else {
            galleryPrev()
            return false;
        }
    } 
});


var order_data = {
    order_items: [
        {
            id: 1,
            title: "Item title",
            price: "3400"
        }
    ]
}

function orderDataUpdate() {
    
}

$(document).on("click", function(e) {
    $(".linkedCaller").each(function(item) {
        attr = $(this).attr("data-link")
    
        if($(this).is(":checked")) {
            $(".linkedContent[data-link="+attr+"]").show();
        } 
        if(!$(this).is(":checked")) {
            $(".linkedContent[data-link="+attr+"]").hide();
        }
    })
})


$("#place-order").on("click", function(e) {
    orderDataUpdate()
})

$(".address-list__item").on("click", function(e) {
    $(this).parent().parent().parent().find(".select-address__input").val($(this).text())
    $(this).parent().parent().parent().removeClass("opened")
})

$(".select-address__input").on("input", function(e) {
    address_list = $(this).parent().parent().find(".address-list").children(".address-list__item")
    var searchValue = $(this).val().trim().toLowerCase();

    if($(this).val() != "") {
        $(this).parent().parent().addClass("opened")

        address_list.each(function(item) {
            if($(this).text().trim().toLowerCase().includes(searchValue)) {
                $(this).show()
            } else {
                $(this).hide()
            }
        })
    } else {
        $(this).parent().parent().removeClass("opened")
    }
})

const sizeTable = [
    { size: "42/XS", chest: [82, 85], waist: [64, 68], hips: [91, 94] },
    { size: "44/S", chest: [86, 89], waist: [68, 72], hips: [95, 98] },
    { size: "46/M", chest: [90, 93], waist: [72, 76], hips: [99, 102] },
    { size: "48/L", chest: [94, 97], waist: [76, 80], hips: [103, 106] },
  ];

  $(document).ready(function() {
    // Используем метод slider() для создания слайдера
    $(".size-ranges__range").slider({
      min: 64,
      max: 120,
      slide: function(event, ui) {
        const selectedRange = $(this).parent().data("range");
        const inputValue = ui.value;
        const size = getSizeBasedOnRange(selectedRange, inputValue);
        $(this).parent().find(".size-ranges__value").text(inputValue + " см")
        $(".size-result__value").text(size);
      }
    });
  });

  // Функция для подбора размера исходя из выбранного диапазона и значения
  function getSizeBasedOnRange(selectedRange, inputValue) {
    let closestSize = "Size not found";
    let closestWidth = Infinity;

    for (const sizeData of sizeTable) {
      const range = sizeData[selectedRange];
      if (inputValue >= range[0] && inputValue <= range[1]) {
        return sizeData.size; // Возвращаем точный размер, если значение входит в диапазон
      }

      const width = Math.min(Math.abs(inputValue - range[0]), Math.abs(inputValue - range[1]));
      if (width < closestWidth) {
        closestWidth = width;
        closestSize = sizeData.size;
      }
    }

    return closestSize; // Возвращаем ближайший более широкий размер
  }


  $(".order-gallery__title").on("click", function(e) {
    $(this).parent().toggleClass("opened")
  })